<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <label for="">
      Unicorn Name:
      <input type="text" id="unicornNameInput" />
    </label>
    <label for="">
      Unicorn loves:
      <input
        type="text"
        placeholder="Example: apple,carrot"
        id="unicornLovesInput"
      />
    </label>
    <button onclick="getUnicorns()">Get Unicorns!</button>
    <script>
      function getUnicorns() {
        const queryToBeSentToTheServerObject = new URLSearchParams();
        // TODO: check if name exists too!
        if (unicornNameInput.value) {
          queryToBeSentToTheServerObject.append("name", unicornNameInput.value);
        }

        if (unicornLovesInput.value) {
          queryToBeSentToTheServerObject.append(
            "loves",
            unicornLovesInput.value,
          );
        }
        const queryToBeSentToTheServerString =
          queryToBeSentToTheServerObject.toString();

        fetch(
          `http://localhost:3000/unicorns?${queryToBeSentToTheServerString}`,
        )
          .then((res) => res.json())
          .then((res) => console.log(res));
      }
    </script>
  </body>
</html>

